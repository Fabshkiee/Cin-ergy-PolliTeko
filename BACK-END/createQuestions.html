<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>CREATE NEW QUESTIONS</h1>
    <form id="createQuesitons" method="get">
        <div>
            <label for="chooseQuestion">CHOOSE QUESTION</label>
            <select id="chooseQuestion" name="chooseQuestion" required>
                <option value="" disabled selected>Select Question</option>
                <option value="question1">Multiple Choice Question</option>
                <option value="question2">Ranked Choice Question</option>
                <option value="question3">Issues and Controversies</option>
        </div>

        <script>
            const chooseQuestion = document.getElementById("chooseQuestion");
        
            chooseQuestion.addEventListener("change", function () {
                const selectedQuestion = this.value;

                const existingTextarea = document.getElementById("dyanamicTextarea");
                const existingSelect = document.getElementById("dynamicSelect");
                const existingHeading = document.querySelector("h2");
                const existingButton = document.getElementById("buttonAdd");
                const existingList = document.getElementById("issueList");
                const existingInput = document.querySelector("input[type='text']");
                const existingListItems = document.querySelectorAll("ol li");
                const existingSubmitButton = document.querySelector("button[type='submit']");

                if(existingTextarea) {existingTextarea.remove();}
                if(existingSelect) {existingSelect.remove();} 
                if(existingButton) {existingButton.remove();}
                if(existingList) {existingList.remove();}
                if(existingHeading) {existingHeading.remove();}
                if(existingInput) {existingInput.remove();}
                if(existingSubmitButton) {existingSubmitButton.remove();}    
                
                const submit = document.createElement("button");
                submit.textContent = "Submit";
                submit.type = "Submit";

                if (selectedQuestion === "question1" || selectedQuestion === "question2") {

                    const form = document.getElementById("createQuesitons");
                    
                    const head = document.createElement("h2");
                    head.textContent = selectedQuestion === "question1" ? "MULTIPLE CHOICE QUESTION" : "RANKED CHOICE QUESTION";
                    form.appendChild(head);

                    const newInput = document.createElement("textarea");
                    newInput.setAttribute("id", "dyanamicTextarea");
                    newInput.setAttribute("placeholder", "Enter your question here...");
                    newInput.setAttribute("rows", "4");
                    newInput.setAttribute("cols", "50");
                
                    const newInput2 = document.createElement("select");
                    newInput2.setAttribute("id", "dynamicSelect");
                    
                    const options = [
                        {value: "option1", text: "Option 1"},
                        {value: "option2", text: "Option 2"},
                        {value: "option3", text: "Option 3"},
                    ];
                    
                    options.forEach(optionDate => {
                        const option = document.createElement("option");
                        option.value = optionDate.value;
                        option.textContent = optionDate.text;
                        newInput2.appendChild(option);
                    })
                    
                    form.appendChild(newInput);
                    form.appendChild(newInput2);
                    form.appendChild(submit);
                
                } else if (selectedQuestion === "question3") {
                    const form = document.getElementById("createQuesitons");

                    const head = document.createElement("h2");
                    head.textContent = "ISSUES AND CONTROVERSIES";
                    form.appendChild(head);

                    const newInput = document.createElement("input");
                    newInput.setAttribute("type", "text");
                    newInput.setAttribute("id", "dynamicTextarea");
                    newInput.setAttribute("placeholder", "List issues here...");
                    form.append(newInput);

                    const addButton = document.createElement("button");
                    addButton.textContent = "Add Issue";
                    addButton.type = "button"; 
                    addButton.id = "buttonAdd";
                    form.appendChild(addButton);
                        
                    const issueList = document.createElement("ol");
                    issueList.setAttribute("id", "issueList");
                    form.appendChild(issueList);

                    const issues = [];
                    
                    addButton.addEventListener("click", function () {
                        const issueVlaue = newInput.value.trim();
                        if (issueVlaue) {
                            
                            issues.push(issueVlaue);
                            newInput.value = '';
                            issueList.innerHTML = ''; 
                            
                            issues.forEach(issue => {
                                const li = document.createElement("li");
                                li.textContent = issue;

                                const del = document.createElement("button");
                                del.textContent = "Delete";
                                del.type = "button";

                                del.addEventListener("click", function () {
                                    issues.splice(issues.indexOf(issue), 1);
                                    issueList.removeChild(li);
                                });

                                li.appendChild(del);
                                issueList.appendChild(li); 
                            });
                            form.appendChild(submit);
                        }
                    })

                }
            });
        </script>
    </form>
</body>
</html>